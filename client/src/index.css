@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: hsl(0 0% 100%);
  --foreground: hsl(210 25% 7.8431%);
  --card: hsl(180 6.6667% 97.0588%);
  --card-foreground: hsl(210 25% 7.8431%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(210 25% 7.8431%);
  --primary: hsl(203.8863 88.2845% 53.1373%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(210 25% 7.8431%);
  --secondary-foreground: hsl(0 0% 100%);
  --muted: hsl(240 1.9608% 90%);
  --muted-foreground: hsl(210 25% 7.8431%);
  --accent: hsl(211.5789 51.3514% 92.7451%);
  --accent-foreground: hsl(203.8863 88.2845% 53.1373%);
  --destructive: hsl(356.3033 90.5579% 54.3137%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(201.4286 30.4348% 90.9804%);
  --input: hsl(200 23.0769% 97.4510%);
  --ring: hsl(202.8169 89.1213% 53.1373%);
  --chart-1: hsl(203.8863 88.2845% 53.1373%);
  --chart-2: hsl(159.7826 100% 36.0784%);
  --chart-3: hsl(42.0290 92.8251% 56.2745%);
  --chart-4: hsl(147.1429 78.5047% 41.9608%);
  --chart-5: hsl(341.4894 75.2000% 50.9804%);
  --sidebar: hsl(180 6.6667% 97.0588%);
  --sidebar-foreground: hsl(210 25% 7.8431%);
  --sidebar-primary: hsl(203.8863 88.2845% 53.1373%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(211.5789 51.3514% 92.7451%);
  --sidebar-accent-foreground: hsl(203.8863 88.2845% 53.1373%);
  --sidebar-border: hsl(205.0000 25.0000% 90.5882%);
  --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);
  --font-sans: 'Inter', sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: Menlo, monospace;
  --radius: 1.3rem;
  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;
  
  /* Basketball theme colors */
  --basketball: hsl(20 95% 54%);
  
  /* New theme tokens for responsive design */
  --panel: hsl(0 0% 100%);
  --tile-bg: hsl(180 6.6667% 97.0588%);
  --tile-deeper: hsl(210 25% 92%);
  --tile-border: hsl(201.4286 30.4348% 90.9804%);
  --text: hsl(210 25% 7.8431%);
  --brand: hsl(203.8863 88.2845% 53.1373%);
  --font: 'Inter', sans-serif;
}

.dark {
  --background: hsl(222.2 84% 4.9%);
  --foreground: hsl(210 40% 98%);
  --card: hsl(222.2 84% 4.9%);
  --card-foreground: hsl(210 40% 98%);
  --popover: hsl(222.2 84% 4.9%);
  --popover-foreground: hsl(210 40% 98%);
  --primary: hsl(203.8863 88.2845% 53.1373%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(217.2 32.6% 17.5%);
  --secondary-foreground: hsl(210 40% 98%);
  --muted: hsl(217.2 32.6% 17.5%);
  --muted-foreground: hsl(215 20.2% 65.1%);
  --accent: hsl(217.2 32.6% 17.5%);
  --accent-foreground: hsl(210 40% 98%);
  --destructive: hsl(356.3033 90.5579% 54.3137%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(217.2 32.6% 17.5%);
  
  /* Dark mode theme tokens */
  --panel: hsl(222.2 84% 4.9%);
  --tile-bg: hsl(217.2 32.6% 17.5%);
  --tile-deeper: hsl(217.2 32.6% 14%);
  --tile-border: hsl(217.2 32.6% 20%);
  --text: hsl(210 40% 98%);
  --brand: hsl(203.8863 88.2845% 53.1373%);
  --font: 'Inter', sans-serif;
  --input: hsl(217.2 32.6% 17.5%);
  --ring: hsl(202.8169 89.1213% 53.1373%);
  --sidebar: hsl(222.2 84% 4.9%);
  --sidebar-foreground: hsl(210 40% 98%);
  --sidebar-primary: hsl(203.8863 88.2845% 53.1373%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(217.2 32.6% 17.5%);
  --sidebar-accent-foreground: hsl(210 40% 98%);
  --sidebar-border: hsl(217.2 32.6% 17.5%);
  --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);
  
  /* Basketball theme colors */
  --basketball: hsl(20 95% 54%);
  --court: hsl(210 28% 18%);
  --highlight: hsl(44 96% 52%);
}

.dark {
  --background: hsl(0 0% 0%);
  --foreground: hsl(200 6.6667% 91.1765%);
  --card: hsl(228 9.8039% 10%);
  --card-foreground: hsl(0 0% 85.0980%);
  --popover: hsl(0 0% 0%);
  --popover-foreground: hsl(200 6.6667% 91.1765%);
  --primary: hsl(203.7736 87.6033% 52.5490%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(195.0000 15.3846% 94.9020%);
  --secondary-foreground: hsl(210 25% 7.8431%);
  --muted: hsl(0 0% 9.4118%);
  --muted-foreground: hsl(210 3.3898% 46.2745%);
  --accent: hsl(205.7143 70% 7.8431%);
  --accent-foreground: hsl(203.7736 87.6033% 52.5490%);
  --destructive: hsl(356.3033 90.5579% 54.3137%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(210 5.2632% 14.9020%);
  --input: hsl(207.6923 27.6596% 18.4314%);
  --ring: hsl(202.8169 89.1213% 53.1373%);
  --chart-1: hsl(203.8863 88.2845% 53.1373%);
  --chart-2: hsl(159.7826 100% 36.0784%);
  --chart-3: hsl(42.0290 92.8251% 56.2745%);
  --chart-4: hsl(147.1429 78.5047% 41.9608%);
  --chart-5: hsl(341.4894 75.2000% 50.9804%);
  --sidebar: hsl(228 9.8039% 10%);
  --sidebar-foreground: hsl(0 0% 85.0980%);
  --sidebar-primary: hsl(202.8169 89.1213% 53.1373%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(205.7143 70% 7.8431%);
  --sidebar-accent-foreground: hsl(203.7736 87.6033% 52.5490%);
  --sidebar-border: hsl(205.7143 15.7895% 26.0784%);
  --sidebar-ring: hsl(202.8169 89.1213% 53.1373%);
  --font-sans: 'Inter', sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: Menlo, monospace;
  --radius: 1.3rem;
  --shadow-2xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 1px 2px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 2px 4px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 4px 6px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00), 0px 8px 10px -1px hsl(202.8169 89.1213% 53.1373% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(202.8169 89.1213% 53.1373% / 0.00);
  
  /* Basketball theme colors for dark mode */
  --basketball: hsl(20 95% 54%);
  --court: hsl(210 28% 18%);
  --highlight: hsl(44 96% 52%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

@layer components {
  .grid-cell {
    aspect-ratio: 1;
    transition: all 0.2s ease;
  }
  
  .grid-cell:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .upload-area {
    transition: all 0.3s ease;
  }
  
  .upload-area.dragover {
    background-color: hsl(var(--background));
    border-color: var(--basketball);
  }
}

@layer utilities {
  .bg-basketball {
    background-color: var(--basketball);
  }
  
  .text-basketball {
    color: var(--basketball);
  }
  
  .border-basketball {
    border-color: var(--basketball);
  }
  
  .bg-court {
    background-color: var(--court);
  }
  
  .text-court {
    color: var(--court);
  }
  
  .bg-highlight {
    background-color: var(--highlight);
  }
  
  .text-highlight {
    color: var(--highlight);
  }
}

/* App shell with safe areas */
#root {
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  min-height: 100vh;
  font-family: var(--font);
}

/* Rarity color system: 0 = red → 100 = green */
.rarity-chip {
  --rarity-hue: calc(120 * var(--rarity) / 100);
  background: hsl(var(--rarity-hue) 85% 45%);
  color: white;
}

/* Global responsive typography */
.fluid-text-xs { font-size: clamp(10px, 1.8vmin, 14px); }
.fluid-text-sm { font-size: clamp(12px, 2.2vmin, 18px); }
.fluid-text-base { font-size: clamp(14px, 2.6vmin, 20px); }
.fluid-text-lg { font-size: clamp(16px, 3vmin, 24px); }
.fluid-text-xl { font-size: clamp(18px, 3.2vmin, 28px); }
.fluid-text-2xl { font-size: clamp(20px, 3.6vmin, 32px); }

/* Universal name bar component */
.nameBar {
  position: absolute;
  left: clamp(8px, 2vmin, 12px);
  right: clamp(8px, 2vmin, 12px);
  bottom: clamp(8px, 1.6vmin, 12px);
  padding: clamp(6px, 1vmin, 10px) clamp(10px, 1.4vmin, 12px);
  border-radius: clamp(10px, 1.3vmin, 14px);
  background: rgba(0, 0, 0, 0.45); /* solid translucent – no backdrop-filter */
  color: #fff; /* force readable text */
  z-index: 2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  word-break: break-word;
  hyphens: auto;
  font-weight: 800;
  font-size: clamp(12px, 2.2vmin, 18px);
  line-height: 1.1;
}

.nameBar.one-line {
  display: block;
  white-space: nowrap;
  text-overflow: ellipsis;
  -webkit-line-clamp: unset;
  -webkit-box-orient: unset;
}

/* Main layout structure */
.main {
  display: grid;
  grid-template-columns: 1fr minmax(0, 380px);
  gap: clamp(12px, 2vmin, 20px);
}

@media (max-width: 900px) {
  .main {
    grid-template-columns: 1fr;
  }
}

/* Grid wrapper and layout */
.gridWrap {
  width: 100%;
  max-width: 1100px;
  margin-inline: auto;
  overflow-x: hidden;
}

.grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(10px, 1.8vmin, 16px);
}

.grid .tile {
  aspect-ratio: 1 / 1;
  min-width: 0;
  position: relative;
}

.game-tile {
  aspect-ratio: 1 / 1;
  position: relative;
  background: var(--tile-bg);
  border: 1px solid var(--tile-border);
  border-radius: clamp(12px, 1.5vmin, 16px);
  cursor: pointer;
  transition: all 160ms ease;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.game-tile:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.game-tile.filled {
  background: var(--tile-deeper);
}

/* Rarity chip */
.tile .rarityChip {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 3;
  padding: clamp(4px, 0.8vmin, 6px) clamp(6px, 1.2vmin, 8px);
  border-radius: clamp(8px, 1vmin, 12px);
  font-size: clamp(10px, 1.8vmin, 14px);
  font-weight: 600;
}

/* Compact stats strip */
.statsStrip {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  gap: clamp(8px, 1.6vmin, 14px);
  padding: clamp(8px, 1.6vmin, 12px) 0;
}

.statsStrip .stat {
  display: flex;
  gap: 6px;
  align-items: baseline;
}

.statsStrip .val {
  font-weight: 800;
  font-size: clamp(14px, 3.2vmin, 20px);
  line-height: 1;
}

.statsStrip .lbl {
  font-size: clamp(11px, 1.8vmin, 13px);
  opacity: 0.7;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

/* Player avatar sizing */
.player-avatar {
  max-width: 100%;
  height: auto;
  max-height: 70%;
  border-radius: 50%;
}

/* Modal responsive */
.player-modal {
  max-height: min(86vh, 900px);
  width: min(90vw, 480px);
  overscroll-behavior: contain;
}

.modal-header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--panel);
  border-bottom: 1px solid var(--tile-border);
}

.modal-body {
  overflow-y: auto;
  padding: clamp(16px, 3vmin, 24px);
}

.modal-section {
  background: var(--tile-bg);
  border: 1px solid var(--tile-border);
  border-radius: clamp(8px, 1vmin, 12px);
  padding: clamp(12px, 2vmin, 16px);
  margin-bottom: clamp(12px, 2vmin, 16px);
}

/* Close button hitbox */
.close-button {
  min-width: 40px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Overflow control */
.no-scroll-x {
  overflow-x: hidden;
}

.scrollable-y {
  overflow-y: auto;
  overscroll-behavior-y: contain;
}
